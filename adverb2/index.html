<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ç¾å ´æ—¥æœ¬èª éŸ³å£°ã‚¯ã‚¤ã‚ºï½œåè©â‘ </title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  text-align: center;
  padding: 20px;
}

h2 {
  margin-bottom: 10px;
}

#counter {
  margin-bottom: 10px;
  font-size: 14px;
  color: #555;
}

/* â–¶ï¸ å†ç”Ÿãƒœã‚¿ãƒ³ï¼ˆã¦å½¢â‘ ã¨åŒã˜ï¼‰ */
#playBtn {
  margin: 20px auto 15px;
  min-width: 220px;
  max-width: 90%;
  padding: 16px 18px;
  font-size: 28px;
  border-radius: 14px;
  border: 1px solid #333;
  background: #ffffff;
  display: block;
}

/* é¸æŠè‚¢ */
button.choice {
  min-width: 220px;
  max-width: 90%;
  padding: 14px 18px;
  margin: 10px auto;
  font-size: 20px;
  border-radius: 14px;
  border: 1px solid #ccc;
  background: #f0f0f0;
  display: block;
  color: #000;
}

.hiragana {
  display: block;
  margin-top: 6px;
  font-size: 20px;
}

/* æ¬¡ã®å•é¡Œ */
#nextBtn {
  margin: 24px auto 0;
  padding: 14px 22px;
  font-size: 18px;
  border-radius: 12px;
  border: 1px solid #aaa;
  background: #fff;
  display: none;
}
</style>
</head>

<body>

<h2>ğŸ§ éŸ³ã‚’èã„ã¦ãˆã‚‰ã‚“ã§ã­</h2>
<p id="counter"></p>

<button id="playBtn">â–¶ï¸</button>

<div id="choices"></div>

<button id="nextBtn">æ¬¡ã®å•é¡Œ â–¶ï¸</button>

<script>
const data = [
  { audio:"massugu.m4a", text:"ááŸ’ášá„áŸ‹", jp:"ã¾ã£ã™ã" },
  { audio:"shikkari.m4a", text:"á²áŸ’á™á˜áŸ‰áºá„á˜áŸ‰á¶ááŸ‹", jp:"ã—ã£ã‹ã‚Š" },
  { audio:"kichinto.m4a", text:"á²áŸ’á™á”á¶á“áŸáŸ’á¢á¶á/ááŸ’ášá¹á˜ááŸ’ášá¼áœ", jp:"ãã¡ã‚“ã¨" },
  { audio:"betsubetsu.m4a", text:"áŠá¶á…áŸ‹áŠáŸ„á™á¡áŸ‚á€", jp:"ã¹ã¤ã¹ã¤ã«" },
  { audio:"ichido.m4a", text:"á˜áŸ’áá„", jp:"ã„ã¡ã©" },
  { audio:"nandomo.m4a", text:"á…áŸ’ášá¾á“áŠá„", jp:"ãªã‚“ã©ã‚‚" },
  { audio:"zenbu.m4a", text:"á‘á¶áŸ†á„á¢áŸáŸ‹", jp:"ãœã‚“ã¶" },
  { audio:"sukoshi.m4a", text:"á”á“áŸ’áá·á…", jp:"ã™ã“ã—" },
  { audio:"takusan.m4a", text:"á…áŸ’ášá¾á“", jp:"ãŸãã•ã‚“" },
  { audio:"totemo.m4a", text:"ááŸ’á›á¶áŸ†á„áá¶áŸáŸ‹", jp:"ã¨ã¦ã‚‚" }
];


const totalQuestions = 10;
let questions = [];
let current = 0;
let correctCount = 0;
let answered = false;

const audio = new Audio();
const playBtn = document.getElementById("playBtn");
const choicesDiv = document.getElementById("choices");
const counter = document.getElementById("counter");
const nextBtn = document.getElementById("nextBtn");

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

playBtn.onclick = () => {
  audio.currentTime = 0;
  audio.play();
};

nextBtn.onclick = () => {
  current++;
  if (current >= totalQuestions) {
    document.body.innerHTML = `
      <h2>ğŸ‰ ãŠã¤ã‹ã‚Œã•ã¾ï¼</h2>
      <p style="font-size:22px;">
        ${totalQuestions}å•ä¸­ <strong>${correctCount}</strong> å• æ­£è§£ï¼
      </p>
    `;
  } else {
    loadQuestion();
  }
};

function loadQuestion() {
  answered = false;
  choicesDiv.innerHTML = "";
  nextBtn.style.display = "none";

  counter.textContent = `å•é¡Œ ${current + 1} / ${totalQuestions}`;

  const q = questions[current];
  audio.src = q.audio;

  const wrongs = shuffle(
    data.filter(d => d.text !== q.text)
  ).slice(0, 2);

  const options = shuffle([q, ...wrongs]);

  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.textContent = opt.text;
    btn.onclick = () => checkAnswer(opt, q);
    choicesDiv.appendChild(btn);
  });
}

function checkAnswer(selected, correct) {
  if (answered) return;
  answered = true;

  const buttons = document.querySelectorAll(".choice");

  buttons.forEach(b => {
    const item = data.find(d => d.text === b.textContent);
    if (item.text === correct.text) {
      b.innerHTML = "â­•ï¸ " + item.text +
        `<span class="hiragana">${item.jp}</span>`;
    } else {
      b.textContent = "âœ–ï¸ " + b.textContent;
    }
  });

  if (selected.text === correct.text) {
    correctCount++;
  }

  nextBtn.style.display = "block";
}

questions = shuffle(data);
loadQuestion();
</script>

</body>
</html>