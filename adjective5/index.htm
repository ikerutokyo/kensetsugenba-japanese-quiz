<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ç¾å ´æ—¥æœ¬èª éŸ³å£°ã‚¯ã‚¤ã‚ºï½œåè©â‘ </title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  text-align: center;
  padding: 20px;
}

h2 {
  margin-bottom: 10px;
}

#counter {
  margin-bottom: 10px;
  font-size: 14px;
  color: #555;
}

/* â–¶ï¸ å†ç”Ÿãƒœã‚¿ãƒ³ï¼ˆã¦å½¢â‘ ã¨åŒã˜ï¼‰ */
#playBtn {
  margin: 20px auto 15px;
  min-width: 220px;
  max-width: 90%;
  padding: 16px 18px;
  font-size: 28px;
  border-radius: 14px;
  border: 1px solid #333;
  background: #ffffff;
  display: block;
}

/* é¸æŠè‚¢ */
button.choice {
  min-width: 220px;
  max-width: 90%;
  padding: 14px 18px;
  margin: 10px auto;
  font-size: 20px;
  border-radius: 14px;
  border: 1px solid #ccc;
  background: #f0f0f0;
  display: block;
  color: #000;
}

.hiragana {
  display: block;
  margin-top: 6px;
  font-size: 20px;
}

/* æ¬¡ã®å•é¡Œ */
#nextBtn {
  margin: 24px auto 0;
  padding: 14px 22px;
  font-size: 18px;
  border-radius: 12px;
  border: 1px solid #aaa;
  background: #fff;
  display: none;
}
</style>
</head>

<body>

<h2>ğŸ§ éŸ³ã‚’èã„ã¦ãˆã‚‰ã‚“ã§ã­</h2>
<p id="counter"></p>

<button id="playBtn">â–¶ï¸</button>

<div id="choices"></div>

<button id="nextBtn">æ¬¡ã®å•é¡Œ â–¶ï¸</button>

<script>
const data = [
  { audio: "akai.m4a", text: "á€áŸ’ášá á˜", jp: "ã‚ã‹ã„" },
  { audio: "aoi.m4a", text: "ááŸ€áœ", jp: "ã‚ãŠã„" },
  { audio: "shiroi.m4a", text: "áŸ", jp: "ã—ã‚ã„" },
  { audio: "kuroi.m4a", text: "ááŸ’á˜áŸ…", jp: "ãã‚ã„" },
  { audio: "kiiroi.m4a", text: "á›á¿á„", jp: "ãã„ã‚ã„" },
  { audio: "mizuiro.m4a", text: "ááŸ€áœááŸ’á…á¸", jp: "ã¿ãšã„ã‚" },
  { audio: "midori.m4a", text: "á”áŸƒáá„", jp: "ã¿ã©ã‚Š" },
  { audio: "murasaki.m4a", text: "áŸáŸ’áœá¶á™", jp: "ã‚€ã‚‰ã•ã" },
  { audio: "naniiro.m4a", text: "á–ááŸŒá¢áŸ’áœá¸?", jp: "ãªã«ã„ã‚ï¼Ÿ" }
];


const totalQuestions = 9;
let questions = [];
let current = 0;
let correctCount = 0;
let answered = false;

const audio = new Audio();
const playBtn = document.getElementById("playBtn");
const choicesDiv = document.getElementById("choices");
const counter = document.getElementById("counter");
const nextBtn = document.getElementById("nextBtn");

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

playBtn.onclick = () => {
  audio.currentTime = 0;
  audio.play();
};

nextBtn.onclick = () => {
  current++;
  if (current >= totalQuestions) {
    document.body.innerHTML = `
      <h2>ğŸ‰ ãŠã¤ã‹ã‚Œã•ã¾ï¼</h2>
      <p style="font-size:22px;">
        ${totalQuestions}å•ä¸­ <strong>${correctCount}</strong> å• æ­£è§£ï¼
      </p>
    `;
  } else {
    loadQuestion();
  }
};

function loadQuestion() {
  answered = false;
  choicesDiv.innerHTML = "";
  nextBtn.style.display = "none";

  counter.textContent = `å•é¡Œ ${current + 1} / ${totalQuestions}`;

  const q = questions[current];
  audio.src = q.audio;

  const wrongs = shuffle(
    data.filter(d => d.text !== q.text)
  ).slice(0, 2);

  const options = shuffle([q, ...wrongs]);

  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.textContent = opt.text;
    btn.onclick = () => checkAnswer(opt, q);
    choicesDiv.appendChild(btn);
  });
}

function checkAnswer(selected, correct) {
  if (answered) return;
  answered = true;

  const buttons = document.querySelectorAll(".choice");

  buttons.forEach(b => {
    const item = data.find(d => d.text === b.textContent);
    if (item.text === correct.text) {
      b.innerHTML = "â­•ï¸ " + item.text +
        `<span class="hiragana">${item.jp}</span>`;
    } else {
      b.textContent = "âœ–ï¸ " + b.textContent;
    }
  });

  if (selected.text === correct.text) {
    correctCount++;
  }

  nextBtn.style.display = "block";
}

questions = shuffle(data);
loadQuestion();
</script>

</body>
</html>