<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ç¾å ´æ—¥æœ¬èª éŸ³å£°ã‚¯ã‚¤ã‚º</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  text-align: center;
  padding: 20px;
}

h2 {
  margin-bottom: 8px;
}

#counter {
  margin-bottom: 12px;
  font-size: 14px;
  color: #555;
}

/* â–¶ï¸ å†ç”Ÿãƒœã‚¿ãƒ³ï¼ˆç™½ï¼‰ */
#playBtn {
  margin: 18px auto 22px;
  min-width: 140px;     /* é¸æŠè‚¢ã‚ˆã‚Šå°‘ã—ç´°ã„ */
  max-width: 60%;
  padding: 16px;
  font-size: 32px;
  border-radius: 12px;
  border: 1px solid #ccc;
  background: #ffffff; /* â† ç™½ */
  display: block;
  position: relative;
  z-index: 10;
}

/* é¸æŠè‚¢ã‚¨ãƒªã‚¢ */
#choices {
  position: relative;
  z-index: 1;
}

/* é¸æŠè‚¢ãƒœã‚¿ãƒ³ï¼ˆã‚°ãƒ¬ãƒ¼ï¼‰ */
#choices button {
  min-width: 200px;
  max-width: 90%;
  padding: 14px 18px;
  margin: 10px auto;
  font-size: 18px;
  border-radius: 12px;
  border: 1px solid #ccc;
  background: #f0f0f0;
  display: block;
  color: #000;
}

button.correct {
  background: #b6e7b9;
  border-color: #2e7d32;
  font-weight: bold;
}

button.wrong {
  background: #f5b7b1;
  border-color: #c62828;
  font-weight: bold;
}

/* æ¬¡ã®å•é¡Œãƒœã‚¿ãƒ³ */
#nextBtn {
  margin: 22px auto 0;
  padding: 14px 20px;
  font-size: 18px;
  border-radius: 12px;
  display: none;
}
</style>
</head>

<body>

<h2>ğŸ§ éŸ³ã‚’èã„ã¦ãˆã‚‰ã‚“ã§ã­</h2>
<p id="counter"></p>

<audio id="audio"></audio>

<button id="playBtn" onclick="playAudio()">â–¶ï¸</button>

<div id="choices"></div>

<button id="nextBtn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œ â–¶ï¸</button>

<script>
const questionData = [
  { audio: "kite.m4a", text: "áŸá¼á˜â€‹á˜á€â€‹á•á„" },
  { audio: "itte.m4a", text: "áŸá¼á˜â€‹á‘áŸ…â€‹á•á„" },
  { audio: "motte.m4a", text: "áŸá¼á˜â€‹á™á€â€‹á•á„" },
  { audio: "oite.m4a", text: "áŸá¼á˜â€‹áŠá¶á€áŸ‹â€‹á•á„" },
  { audio: "tsukete.m4a", text: "áŸá¼á˜â€‹áŠá¶á€áŸ‹â€‹á•á„" },
  { audio: "totte.m4a", text: "áŸá¼á˜â€‹á™á€â€‹á•á„" },
  { audio: "yatte.m4a", text: "áŸá¼á˜â€‹á’áŸ’áœá¾â€‹á•á„" },
  { audio: "kakunin.m4a", text: "áŸá¼á˜â€‹á–á·á“á·ááŸ’á™â€‹á•á„" },
  { audio: "check.m4a", text: "áŸá¼á˜â€‹ááŸ’ášá½áá–á·á“á·ááŸ’á™â€‹á•á„" },
  { audio: "agatte.m4a", text: "áŸá¼á˜â€‹á¡á¾á„â€‹á•á„" },
  { audio: "orite.m4a", text: "áŸá¼á˜â€‹á…á»áŸ‡" }
];

const totalQuestions = 20;
let currentQuestion = 0;
let correctCount = 0;
let currentCorrectText = "";

const audio = document.getElementById("audio");
const choicesDiv = document.getElementById("choices");
const nextBtn = document.getElementById("nextBtn");
const counter = document.getElementById("counter");

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function playAudio() {
  audio.currentTime = 0;
  audio.play();
}

function loadQuestion() {
  choicesDiv.innerHTML = "";
  nextBtn.style.display = "none";

  counter.textContent = `å•é¡Œ ${currentQuestion + 1} / ${totalQuestions}`;

  const correct =
    questionData[Math.floor(Math.random() * questionData.length)];
  currentCorrectText = correct.text;

  audio.src = correct.audio;
  audio.load();

  const wrongs = shuffle(
    questionData.filter(q => q.text !== correct.text)
  ).slice(0, 2);

  const options = shuffle([correct, ...wrongs]);

  options.forEach(option => {
    const btn = document.createElement("button");
    btn.textContent = option.text;
    btn.onclick = () =>
      checkAnswer(btn, option.text === currentCorrectText);
    choicesDiv.appendChild(btn);
  });
}

function checkAnswer(button, isCorrect) {
  const buttons = document.querySelectorAll("#choices button");
  buttons.forEach(btn => (btn.disabled = true));

  if (isCorrect) {
    button.classList.add("correct");
    button.textContent = "â­•ï¸ " + button.textContent;
    correctCount++;
  } else {
    button.classList.add("wrong");
    button.textContent = "âœ–ï¸ " + button.textContent;

    buttons.forEach(btn => {
      if (btn.textContent === currentCorrectText) {
        btn.classList.add("correct");
        btn.textContent = "â­•ï¸ " + btn.textContent;
      }
    });
  }

  nextBtn.style.display = "block";
}

function nextQuestion() {
  currentQuestion++;

  if (currentQuestion >= totalQuestions) {
    document.body.innerHTML = `
      <h2>ğŸ‰ ãŠã¤ã‹ã‚Œã•ã¾ï¼</h2>
      <p style="font-size:22px;">
        ${totalQuestions}å•ä¸­ <strong>${correctCount}</strong> å• æ­£è§£ï¼
      </p>
    `;
  } else {
    loadQuestion();
  }
}

loadQuestion();
</script>

</body>
</html>