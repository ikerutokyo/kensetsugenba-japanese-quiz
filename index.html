<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ç¾å ´æ—¥æœ¬èª éŸ³å£°ã‚¯ã‚¤ã‚ºï¼ˆå±é™ºæ³¨æ„ï¼‰</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  text-align: center;
  padding: 20px;
}

h2 {
  margin-bottom: 8px;
}

#counter {
  margin-bottom: 12px;
  font-size: 14px;
  color: #555;
}

#playBtn {
  margin: 18px auto 22px;
  min-width: 140px;
  max-width: 60%;
  padding: 16px;
  font-size: 32px;
  border-radius: 12px;
  border: 1px solid #ccc;
  background: #fff;
}

#choices button {
  min-width: 200px;
  max-width: 90%;
  padding: 14px 18px;
  margin: 10px auto;
  font-size: 18px;
  border-radius: 12px;
  border: 1px solid #ccc;
  background: #f0f0f0;
  display: block;
}

button.correct {
  background: #b6e7b9;
  border-color: #2e7d32;
  font-weight: bold;
}

button.wrong {
  background: #f5b7b1;
  border-color: #c62828;
  font-weight: bold;
}

#nextBtn {
  margin: 22px auto 0;
  padding: 14px 20px;
  font-size: 18px;
  border-radius: 12px;
  display: none;
}
</style>
</head>

<body>

<h2>ğŸ§ éŸ³ã‚’èã„ã¦ãˆã‚‰ã‚“ã§ã­</h2>
<p id="counter"></p>

<audio id="audio" playsinline></audio>

<button id="playBtn" onclick="playAudio()">â–¶ï¸</button>

<div id="choices"></div>

<button id="nextBtn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œ â–¶ï¸</button>

<script>
/*
 group ãŒåŒã˜ã‚‚ã®ã¯
 åŒã˜å•é¡Œã®é¸æŠè‚¢ã«å‡ºãªã„
*/

const questionData = [
  // å±é™ºæ³¨æ„ï¼ˆ3ï¼‰
  { audio: "abunai.m4a", text: "á‚áŸ’ášáŸ„áŸ‡ááŸ’á“á¶á€áŸ‹!", group: "danger" },
  { audio: "abunai.m4a", text: "á”áŸ’ášá™áŸááŸ’á“!", group: "danger" },

  { audio: "dame.m4a", text: "á˜á·á“á”á¶á“!", group: "no" },
  { audio: "dame.m4a", text: "á€á»áŸ†!", group: "no" },

  { audio: "tomatte.m4a", text: "áˆá”áŸ‹!", group: "stop" },

  // å‹•è©ã¦å½¢â‘¡ï¼ˆ10ï¼‰â€»ä»®ã‚»ãƒƒãƒˆãƒ»ã‚ã¨ã§å·®ã—æ›¿ãˆOK
  { audio: "mite.m4a", text: "áŸá¼á˜â€‹á˜á¾á›â€‹á•á„", group: "miru" },
  { audio: "matte.m4a", text: "áŸá¼á˜â€‹ášá„áŸ‹á…á¶áŸ†â€‹á•á„", group: "matsu" },
  { audio: "suwatte.m4a", text: "áŸá¼á˜â€‹á¢á„áŸ’á‚á»á™â€‹á•á„", group: "suwaru" },
  { audio: "tatte.m4a", text: "áŸá¼á˜â€‹áˆášâ€‹á•á„", group: "tatsu" },
  { audio: "akete.m4a", text: "áŸá¼á˜â€‹á”á¾á€â€‹á•á„", group: "akeru" },
  { audio: "shimete.m4a", text: "áŸá¼á˜â€‹á”á·á‘â€‹á•á„", group: "shimeru" },
  { audio: "yonde.m4a", text: "áŸá¼á˜â€‹á áŸ…â€‹á•á„", group: "yobu" },
  { audio: "kaeshite.m4a", text: "áŸá¼á˜â€‹ááŸ’ášá¡á”áŸ‹â€‹á•á„", group: "kaesu" },
  { audio: "tsukatte.m4a", text: "áŸá¼á˜â€‹á”áŸ’ášá¾â€‹á•á„", group: "tsukau" },
  { audio: "yamete.m4a", text: "áŸá¼á˜â€‹á”á‰áŸ’áˆá”áŸ‹â€‹á•á„", group: "yameru" }
];

const totalQuestions = 13;
let currentQuestion = 0;
let correctCount = 0;
let currentCorrectGroup = "";

const audio = document.getElementById("audio");
const choicesDiv = document.getElementById("choices");
const nextBtn = document.getElementById("nextBtn");
const counter = document.getElementById("counter");

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function playAudio() {
  audio.currentTime = 0;
  audio.load();
  audio.play();
}

function loadQuestion() {
  choicesDiv.innerHTML = "";
  nextBtn.style.display = "none";

  counter.textContent = `å•é¡Œ ${currentQuestion + 1} / ${totalQuestions}`;

  const correct =
    questionData[Math.floor(Math.random() * questionData.length)];
  currentCorrectGroup = correct.group;

  audio.src = correct.audio;
  audio.load();

  const wrongs = shuffle(
    questionData.filter(q => q.group !== currentCorrectGroup)
  ).slice(0, 2);

  const options = shuffle([correct, ...wrongs]);

  options.forEach(option => {
    const btn = document.createElement("button");
    btn.textContent = option.text;
    btn.onclick = () =>
      checkAnswer(btn, option.group === currentCorrectGroup);
    choicesDiv.appendChild(btn);
  });
}

function checkAnswer(button, isCorrect) {
  const buttons = document.querySelectorAll("#choices button");
  buttons.forEach(btn => (btn.disabled = true));

  if (isCorrect) {
    button.classList.add("correct");
    button.textContent = "â­•ï¸ " + button.textContent;
    correctCount++;
  } else {
    button.classList.add("wrong");
    button.textContent = "âœ–ï¸ " + button.textContent;

    buttons.forEach(btn => {
      if (!btn.classList.contains("wrong")) {
        btn.classList.add("correct");
        btn.textContent = "â­•ï¸ " + btn.textContent;
      }
    });
  }

  nextBtn.style.display = "block";
}

function nextQuestion() {
  currentQuestion++;

  if (currentQuestion >= totalQuestions) {
    document.body.innerHTML = `
      <h2>ğŸ‰ ãŠã¤ã‹ã‚Œã•ã¾ï¼</h2>
      <p style="font-size:22px;">
        ${totalQuestions}å•ä¸­ <strong>${correctCount}</strong> å• æ­£è§£ï¼
      </p>
    `;
  } else {
    loadQuestion();
  }
}

loadQuestion();
</script>

</body>
</html>